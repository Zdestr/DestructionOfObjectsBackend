# DestructionOfObjectsBackend

API для моделирования разрушения объектов в Unity.

## Обзор

Этот API рассчитывает параметры разрушения объектов при столкновениях в Unity. Сервер принимает данные о столкновении от клиента Unity, рассчитывает физические параметры разрушения и возвращает информацию, необходимую для визуализации эффекта.

## Эндпоинты API

- `POST /api/collision` - Обработка столкновения и расчет параметров разрушения
- `GET /api/collision/test` - Проверка работоспособности API

## Структура запроса

```json
{
  "objectId": "string",
  "impactForce": 0,
  "impactPoint": {
    "x": 0,
    "y": 0,
    "z": 0
  },
  "impactDirection": {
    "x": 0,
    "y": 0,
    "z": 0
  },
  "objectType": "string",
  "objectMass": 0,
  "objectDimensions": {
    "x": 0,
    "y": 0,
    "z": 0
  }
}
```

## Запуск в своем Unity

Для этого необходимо скопировать все файлы из папки ApiLaunch в папку Scripts внутри вашего проекта. Теперь настроим все объекты, которые будут разрушаться:
Настройка системы разрушения объектов с использованием API

##1. Создание API-клиента
Создайте пустой GameObject:

Hierarchy → правый клик → Create Empty
Назовите его "APIManager"
Добавьте скрипт ApiClient:

Выделите созданный GameObject
Add Component → Scripts → ApiClient
Укажите URL вашего API в поле "API URL" (например, http://your-server.com/api/collision)

##2. Настройка разрушаемого объекта

Выберите объект, который должен разрушаться:

Добавьте компонент Rigidbody
Убедитесь, что у объекта есть коллайдер

Добавьте компонент DestructibleObject:

Add Component → Scripts → DestructibleObject
Настройте параметры:
Object Type: тип материала
Fragment Prefab: префаб фрагментов
Min Impact Force: порог силы разрушения

##3. Создание API моделей

Создайте следующие классы данных:
Vector3Data (для хранения векторов)
CollisionRequest (для запроса к API)
FragmentData (для данных о фрагментах)
CollisionResponse (для ответа от API)

##4. Работа с API

При столкновении объект отправляет запрос к API с данными:

ID объекта
Сила удара
Точка и направление удара
Тип и масса объекта
Размеры объекта
API возвращает ответ с параметрами разрушения:

Возможность разрушения
Сила разрушения
Список фрагментов с параметрами движения
Время исчезновения и затухания

##5. Требования к серверной части

API должен быть развернут на сервере и доступен по указанному URL. Он должен принимать POST-запросы с данными о столкновении и возвращать информацию о параметрах разрушения.

##6. Известные ограничения API версии

Зависимость от доступности внешнего сервера
Задержки при обработке запросов
Необходимость настройки CORS для правильной работы запросов из Unity
Сложности с отладкой при проблемах с соединением
При использовании только API версии все расчеты физики выполняются на сервере, что может обеспечить более сложные модели разрушения, но требует постоянного подключения к интернету и стабильной работы серверной части.
